(function(e){function t(t){for(var a,c,o=t[0],s=t[1],u=t[2],v=0,d=[];v<o.length;v++)c=o[v],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&d.push(i[c][0]),i[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5d2d":function(e,t,n){},6:function(e,t){},7:function(e,t){},8:function(e,t){},"9b7c":function(e,t,n){"use strict";n("5d2d")},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"title-bar"},[e._v("Pinkstack / The Oracle Peak 🏔")]),n("div",{staticClass:"content"},[n("AccessPoints")],1)])},r=[],c=n("9ab4"),o=n("60a3"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v(" Live View "),n("span",{staticClass:"quick-tool"},[n("a",{class:{live:e.live,paused:!e.live},attrs:{title:"Toggle live or pause"},on:{click:function(t){e.live=!e.live}}},[e.live?n("span",[e._v("Live ▶️")]):e._e(),e.live?e._e():n("span",[e._v("Paused ⏸")])])])]),n("div",{staticClass:"tools tabs"},[n("a",{class:{active:"feed"===e.activeTab},on:{click:function(t){e.activeTab="feed"}}},[e._v("AP Live Feed")]),n("a",{class:{active:"list"===e.activeTab},on:{click:function(t){e.activeTab="list"}}},[e._v("AP List")]),n("a",{class:{active:"events"===e.activeTab},on:{click:function(t){e.activeTab="events"}}},[e._v("Events")])]),n("div",{staticClass:"tabs-container"},["feed"===e.activeTab?n("div",{staticClass:"tab"},[0!==e.locationMeasurements.length?n("div",[n("table",[e._m(0),n("tbody",e._l(e.locationMeasurements,(function(t,a){return n("tr",{key:t.mac+t.collected_at+a},[n("td",[n("span",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.location},expression:"{from: lm.location}"}]},[e._v(e._s(t.location))])]),n("td",[e._v(e._s(t.client_id))]),n("td",[t.vendor?n("div",[e._v(e._s(t.vendor))]):e._e(),n("div",{staticClass:"detail"},[e._v(" "+e._s(t.collected_at)+" / "+e._s(t.agent_version)+" ")])]),n("td",[n("div",[n("span",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.hostname||t.mac},expression:"{from: lm.hostname || lm.mac}"}]},[e._v(e._s(t.hostname||t.mac))]),n("div",{staticClass:"detail"},[e._v(" "+e._s(t.authentication)+" "),t.channel?n("span",[e._v("/ "+e._s(t.channel)+" ")]):e._e(),t.frequency?n("span",[e._v("/ "+e._s(t.frequency)+" ")]):e._e()])])]),n("td",e._l(t.clients,(function(t){return n("div",{key:"cl"+t.mac},[n("span",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.hostname||t.vendor||t.mac},expression:"{from: client.hostname || client.vendor || client.mac}"}]},[e._v(e._s(t.hostname||t.vendor||t.mac))])])})),0)])})),0)])]):e._e(),0===e.locationMeasurements.length?n("div",[n("p",[e._v("Waiting for data,...")])]):e._e()]):e._e(),"list"===e.activeTab?n("div",{staticClass:"tab"},[0!==e.accessPoints.length?n("div",[n("p",[e._v("Number of currently visible Access Points: "+e._s(e.accessPoints.length))]),n("table",{staticClass:"access-points"},[e._m(1),n("tbody",e._l(e.accessPoints,(function(t){return n("tr",{key:t.mac},[n("td",[n("div",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.hostname||t.mac},expression:"{from: ap.hostname || ap.mac}"}]},[e._v(e._s(t.hostname))]),n("div",[e._v(e._s(t.mac))]),t.vendor?n("div",[e._v(e._s(t.vendor))]):e._e(),n("div",{staticClass:"detail"},[n("div",[e._v(e._s(t.rssi)+" / "+e._s(t.cipher)+" / "+e._s(t.authentication)+", "+e._s(t.location))]),n("div",[e._v(e._s(t["updates"]))])])]),n("td",e._l(t.clients,(function(a){return n("ul",{key:"cl"+t.mac+a.mac},[n("li",[n("div",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:a.hostname||a.vendor||a.mac},expression:"{from: client.hostname || client.vendor || client.mac}"}]},[e._v(e._s(a.mac)+" "),a.vendor?n("span",[e._v(" - "+e._s(a.vendor))]):e._e(),n("span",{staticClass:"detail"},[a.authentication?n("span",[e._v(e._s(a.authentication)+" /")]):e._e(),a.channel?n("span",[e._v(" "+e._s(a.channel)+" /")]):e._e(),a.frequency?n("span",[e._v(" "+e._s(a.frequency)+" ")]):e._e()])])])])})),0)])})),0)])]):e._e(),0===e.accessPoints.length?n("div",[n("p",[e._v("Waiting for the data,...")])]):e._e()]):e._e(),"events"===e.activeTab?n("div",{staticClass:"tab"},[0!==e.freshEvents.length?n("div",[n("table",[e._m(2),n("tbody",e._l(e.freshEvents,(function(t){return n("tr",{key:t.key},[n("td",[n("div",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.tag},expression:"{from: event.tag}"}]},[e._v(e._s(t.tag))]),n("div",{directives:[{name:"rainbow-background",rawName:"v-rainbow-background",value:{from:t.location},expression:"{from: event.location}"}]},[e._v(e._s(t.location))]),n("div",[e._v(e._s(t.client_id))]),n("div",[e._v(e._s(t.agent_version))]),n("div",[e._v(e._s(t.collected_at))])]),n("td",e._l(e.renderEventData(t.data),(function(t,a){return n("ul",{key:t.key+a},[n("li",[n("strong",[e._v(e._s(t.key)+":")]),e._v(" "+e._s(t.value)+" ")])])})),0)])})),0)])]):e._e(),0===e.freshEvents.length?n("div",[n("p",[e._v("Waiting for the data,...")])]):e._e()]):e._e()])])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Location")]),n("th",[e._v("Client")]),n("th",[e._v("Meta")]),n("th",[e._v("Access Point")]),n("th",[e._v("Clients")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Access Point")]),n("th",[e._v("Clients")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticStyle:{width:"20%"}},[e._v("Meta")]),n("td",[e._v("Event Data")])])])}],l=n("2ef0"),v=n("2fe1"),d=n("e7fc"),f={inserted:function(e,t){var n=function(e){var t=0;if(0===e.length)return t+"";for(var n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;return t%360+""};e&&l["get"](t,"value.from",!1)&&(e.style.color="hsl("+n(l["get"](t,"value.from"))+", 70%, 50%)")}},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAX_MEASUREMENTS_SIZE=200,t.MAX_EVENTS_SIZE=20,t.locationMeasurements=[],t.events=[],t.activeTab="events",t.live=!0,t.client=Object(d["connect"])("wss://mqtt.eclipse.org:443/mqtt",{}).on("connect",(function(){t.client.subscribe(["oracle-peak-staging/+/+/access-points","oracle-peak-staging/+/+/events"],{qos:0},(function(e){e||console.log("Successfully subscribed to MQTT broker.")}))})).on("message",(function(e,n){if(l["endsWith"](e,"access-points")){var a=l["update"](JSON.parse(n.toString("utf-8")),"clients",(function(e){return l["sortBy"](e,(function(e){return e.vendor}))}));t.appendMeasurement(a)}else{if(!l["endsWith"](e,"events"))throw new Error("Unsupported topic "+e);t.appendEvent(JSON.parse(n.toString("utf-8")))}})),t}return Object(c["b"])(t,e),t.prototype.appendMeasurement=function(e){this.live&&(this.locationMeasurements=this.locationMeasurements.concat(e).slice(-1*this.MAX_MEASUREMENTS_SIZE))},t.prototype.appendEvent=function(e){this.live&&(this.events.unshift(e),this.events=this.events.slice(0,this.MAX_EVENTS_SIZE))},t.prototype.created=function(){console.log("Starting connection to MQTT WebSocket...")},Object.defineProperty(t.prototype,"accessPoints",{get:function(){var e=function(e){return e},t=function(e,t){return t["updates"]=(e["updates"]||0)+1,t.clients=l["uniqBy"](e.clients.concat(t.clients),(function(e){return e.mac})),l["merge"](e,t)},n=function(n,a){var i=l["findIndex"](n,(function(e){return e.mac===a.mac}));return-1===i?n.concat(e(a)):l["update"](n,"["+i+"]",(function(n){return t(n,e(a))}))};return l["sortBy"](this.locationMeasurements.reduce(n,Array()),[function(e){return-1*e.clients.length},function(e){return e.mac}])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"freshEvents",{get:function(){return this.events},enumerable:!1,configurable:!0}),t.prototype.renderEventData=function(e){return l["filter"](l["zip"](Object.keys(e),Object.values(e)).map((function(e){return{key:e[0],value:e[1]}})),(function(e){return!l["isEmpty"](e.value)}))},t=Object(c["a"])([Object(v["b"])({directives:{"rainbow-background":f}})],t),t}(o["b"]),p=_,b=p,m=(n("9b7c"),n("2877")),h=Object(m["a"])(b,s,u,!1,null,"45be2d4c",null),g=h.exports,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(c["b"])(t,e),t=Object(c["a"])([Object(o["a"])({components:{AccessPoints:g}})],t),t}(o["b"]),k=y,w=k,E=(n("5c0b"),Object(m["a"])(w,i,r,!1,null,null,null)),O=E.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(O)}}).$mount("#app")}});
//# sourceMappingURL=app.a68a4be5.js.map
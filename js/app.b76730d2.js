(function(e){function t(t){for(var i,s,c=t[0],o=t[1],l=t[2],v=0,f=[];v<c.length;v++)s=c[v],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0f79":function(e,t,n){"use strict";n("65df")},1:function(e,t){},2:function(e,t){},3:function(e,t){},3480:function(e,t,n){"use strict";n("7d99")},4:function(e,t){},5:function(e,t){},"5c0b":function(e,t,n){"use strict";n("9c0c")},6:function(e,t){},"65df":function(e,t,n){},7:function(e,t){},"7d99":function(e,t,n){},8:function(e,t){},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("div",{staticClass:"content"},[n("LiveView")],1)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title-bar"},[e._v(" The Oracle Peak 🏔 "),n("div",{staticClass:"more"},[n("a",{attrs:{href:"https://github.com/pinkstack/oracle-peak",title:"About the project",target:"_blank"}},[e._v(" About the project "),n("span",{staticClass:"material-icons"},[e._v("emoji_people")])])])])}],s=n("9ab4"),c=n("60a3"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Live View "),n("LiveToggle",{on:{live:function(t){e.live=!0},pause:function(t){e.live=!1}}})],1),n("div",{staticClass:"tools tabs"},[n("a",{class:{active:"feed"===e.activeTab},on:{click:function(t){e.activeTab="feed"}}},[e._v("Access Points Feed")]),n("a",{class:{active:"list"===e.activeTab},on:{click:function(t){e.activeTab="list"}}},[e._v("Current View")]),n("a",{class:{active:"events"===e.activeTab},on:{click:function(t){e.activeTab="events"}}},[e._v("Events")])]),n("div",{staticClass:"tabs-container"},["feed"===e.activeTab?n("AccessPointsFeed",{staticClass:"tab",attrs:{"live-measurements":e.liveMeasurements}}):e._e(),"list"===e.activeTab?n("AccessPointsList",{staticClass:"tab",attrs:{"live-measurements":e.liveMeasurements}}):e._e(),"events"===e.activeTab?n("AccessPointsEvents",{staticClass:"tab",attrs:{"live-events":e.liveEvents}}):e._e()],1)])},l=[],u=n("2ef0"),v=n("2fe1"),f=n("e7fc"),p=function(){function e(){}return e.MAX_MEASUREMENTS_SIZE=200,e.MAX_EVENTS_SIZE=20,e.MQTT_BROKER_URL="wss://broker.emqx.io:8084/mqtt",e.DEFAULT_LIVE_VIEW_TAB="feed",e}(),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0!==e.measurements.length?n("div",[n("table",[e._m(0),n("tbody",e._l(e.measurements,(function(t,i){return n("tr",{key:t.mac+t.collected_at+i},[n("td",[n("span",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.location},expression:"{from: lm.location}"}]},[e._v(e._s(t.location))])]),n("td",[e._v(e._s(t.client_id))]),n("td",[t.vendor?n("div",[e._v(e._s(t.vendor))]):e._e(),n("div",{staticClass:"detail"},[e._v(" "+e._s(t.collected_at)+" / "+e._s(t.agent_version)+" ")])]),n("td",[n("div",[n("span",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.hostname||t.mac},expression:"{from: lm.hostname || lm.mac}"}]},[e._v(e._s(t.hostname||t.mac))]),n("div",{staticClass:"detail"},[e._v(" "+e._s(t.authentication)+" "),t.channel?n("span",[e._v("/ "+e._s(t.channel)+" ")]):e._e(),t.frequency?n("span",[e._v("/ "+e._s(t.frequency)+" ")]):e._e()])])]),n("td",[n("Clients",{attrs:{clients:t.clients}})],1)])})),0)])]):e._e(),0===e.measurements.length?n("div",[n("p",[e._v("Waiting for data,...")])]):e._e()])},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Location")]),n("th",[e._v("Client")]),n("th",[e._v("Meta")]),n("th",[e._v("Access Point")]),n("th",[e._v("Clients")])])])}],b={inserted:function(e,t){var n=function(e){var t=0;if(0===e.length)return t+"";for(var n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;return t%360+""};e&&u["get"](t,"value.from",!1)&&(e.style.color="hsl("+n(u["get"](t,"value.from"))+", 70%, 50%)")}},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.clientsList,(function(t){return n("ul",{key:"cl"+t.mac},[n("li",[n("div",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.hostname||t.vendor||t.mac},expression:"{from: client.hostname || client.vendor || client.mac}"}]},[e._v(e._s(t.mac)+" "),t.vendor?n("span",[e._v(" - "+e._s(t.vendor))]):e._e(),n("span",{staticClass:"detail"},[t.authentication?n("span",[e._v(e._s(t.authentication)+" /")]):e._e(),t.channel?n("span",[e._v(" "+e._s(t.channel)+" /")]):e._e(),t.frequency?n("span",[e._v(" "+e._s(t.frequency)+" ")]):e._e()])])])])})),0)},h=[],y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s["b"])(t,e),Object.defineProperty(t.prototype,"clientsList",{get:function(){return this.clients},enumerable:!1,configurable:!0}),Object(s["a"])([Object(c["b"])({type:Array,required:!0,default:[]})],t.prototype,"clients",void 0),t=Object(s["a"])([Object(c["a"])({name:"Clients",directives:{rainbow:b}})],t),t}(c["c"]),g=y,O=g,j=n("2877"),E=Object(j["a"])(O,m,h,!1,null,"3985b95e",null),w=E.exports,T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s["b"])(t,e),Object.defineProperty(t.prototype,"measurements",{get:function(){return this.liveMeasurements},enumerable:!1,configurable:!0}),Object(s["a"])([Object(c["b"])({type:Array,required:!0,default:[]})],t.prototype,"liveMeasurements",void 0),t=Object(s["a"])([Object(c["a"])({components:{Clients:w},directives:{rainbow:b}})],t),t}(c["c"]),M=T,k=M,A=Object(j["a"])(k,_,d,!1,null,"4da0c309",null),P=A.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0!==e.accessPoints.length?n("div",[n("p",[e._v("Number of currently visible Access Points: "+e._s(e.accessPoints.length))]),n("table",{staticClass:"access-points"},[e._m(0),n("tbody",e._l(e.accessPoints,(function(t){return n("tr",{key:t.mac},[n("td",[n("div",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.hostname||t.mac},expression:"{from: ap.hostname || ap.mac}"}]},[e._v(e._s(t.hostname))]),n("div",[e._v(e._s(t.mac))]),t.vendor?n("div",[e._v(e._s(t.vendor))]):e._e(),n("div",{staticClass:"detail"},[n("div",[e._v(e._s(t.rssi)+" / "+e._s(t.cipher)+" / "+e._s(t.authentication)+", "+e._s(t.location))]),n("div",[e._v(e._s(t["updates"]))])])]),n("td",[n("Clients",{attrs:{clients:t.clients}})],1)])})),0)])]):e._e(),0===e.accessPoints.length?n("div",[n("p",[e._v("Waiting for the data,...")])]):e._e()])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Access Point")]),n("th",[e._v("Clients")])])])}],x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s["b"])(t,e),Object.defineProperty(t.prototype,"accessPoints",{get:function(){var e=function(e){return e},t=function(e,t){return t["updates"]=(e["updates"]||0)+1,t.clients=u["uniqBy"](e.clients.concat(t.clients),(function(e){return e.mac})),u["merge"](e,t)},n=function(n,i){var r=u["findIndex"](n,(function(e){return e.mac===i.mac}));return-1===r?n.concat(e(i)):u["update"](n,"["+r+"]",(function(n){return t(n,e(i))}))};return u["sortBy"](this.liveMeasurements.reduce(n,Array()),[function(e){return-1*e.clients.length},function(e){return e.mac}])},enumerable:!1,configurable:!0}),Object(s["a"])([Object(c["b"])({type:Array,required:!0,default:[]})],t.prototype,"liveMeasurements",void 0),t=Object(s["a"])([Object(c["a"])({components:{Clients:w},directives:{rainbow:b}})],t),t}(c["c"]),S=x,$=S,q=Object(j["a"])($,C,L,!1,null,"139f56d5",null),N=q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0!==e.events.length?n("div",[n("table",[e._m(0),n("tbody",e._l(e.events,(function(t){return n("tr",{key:t.key},[n("td",[n("div",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.tag},expression:"{from: event.tag}"}]},[e._v(e._s(t.tag))]),n("div",{directives:[{name:"rainbow",rawName:"v-rainbow",value:{from:t.location},expression:"{from: event.location}"}]},[e._v(e._s(t.location))]),n("div",[e._v(e._s(t.client_id))]),n("div",[e._v(e._s(t.agent_version))]),n("div",[e._v(e._s(t.collected_at))])]),n("td",e._l(e.renderEventData(t.data),(function(t,i){return n("ul",{key:t.key+i},[n("li",[n("strong",[e._v(e._s(t.key)+":")]),e.isObject(t.value)?e._e():n("span",[e._v(" "+e._s(t.value)+" ")]),e.isObject(t.value)?n("div",e._l(e.renderEventData(t.value),(function(t,i){return n("ul",{key:t.key+i+"level2",staticStyle:{"margin-left":"40px","padding-left":"40px"}},[n("li",[n("strong",[e._v(e._s(t.key)+":")]),e._v(" "+e._s(t.value)+" ")])])})),0):e._e()])])})),0)])})),0)])]):e._e(),0===e.events.length?n("div",[n("p",[e._v("Waiting for the data,...")])]):e._e()])},I=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{staticStyle:{width:"20%"}},[e._v("Meta")]),n("th",[e._v("Event Data")])])])}],R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s["b"])(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this.liveEvents},enumerable:!1,configurable:!0}),t.prototype.renderEventData=function(e){return u["filter"](u["zip"](Object.keys(e),Object.values(e)).map((function(e){return{key:e[0],value:e[1]}})),(function(e){return!u["isEmpty"](e.value)}))},t.prototype.isObject=function(e){return u["isObject"](e)},Object(s["a"])([Object(c["b"])({type:Array,required:!0,default:[]})],t.prototype,"liveEvents",void 0),t=Object(s["a"])([Object(c["a"])({directives:{rainbow:b}})],t),t}(c["c"]),B=R,W=B,D=Object(j["a"])(W,V,I,!1,null,"9242ff4c",null),U=D.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{class:{live:e.isLive,paused:!e.isLive},attrs:{title:"Toggle live or pause"},on:{click:function(t){return e.toggleLive()}}},[e.isLive?n("div",[n("span",{staticClass:"material-icons"},[e._v("pause")])]):e._e(),e.isLive?e._e():n("div",[e._v("️"),n("span",{staticClass:"material-icons"},[e._v("play_circle_filled")])])])},Q=[],X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.live=!0,t}return Object(s["b"])(t,e),Object.defineProperty(t.prototype,"isLive",{get:function(){return this.live},enumerable:!1,configurable:!0}),t.prototype.toggleLive=function(){this.live=!this.live,this.$emit(this.live?"live":"pause",[this.live])},t=Object(s["a"])([Object(c["a"])({name:"LiveToggle"})],t),t}(c["c"]),Z=X,J=Z,K=(n("3480"),Object(j["a"])(J,F,Q,!1,null,"19df8cc8",null)),z=K.exports,G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.locationMeasurements=new Array,t.rawEvents=new Array,t.live=!0,t.activeTab=p.DEFAULT_LIVE_VIEW_TAB,t.connectClient=function(e,t,n){var i=function(e){e?console.error(e):console.log("Successfully subscribed to MQTT broker.")},r=function(e,t){var i=JSON.parse(t.toString("utf-8"));n.map((function(e){return e.slice(1)})).forEach((function(t){u["endsWith"](e,t[0])&&t[1](i)}))};return Object(f["connect"])(e,{}).on("message",r).on("error",i).subscribe(n.map((function(e){return u["first"](e)})),t,i)},t}return Object(s["b"])(t,e),t.prototype.appendMeasurement=function(e){this.live&&(this.locationMeasurements=this.locationMeasurements.concat(u["update"](e,"clients",(function(e){return u["sortBy"](e,(function(e){return e.vendor}))}))).slice(-1*p.MAX_MEASUREMENTS_SIZE))},t.prototype.appendEvent=function(e){this.live&&(this.rawEvents.unshift(e),this.rawEvents=this.rawEvents.slice(0,p.MAX_EVENTS_SIZE))},t.prototype.created=function(){var e=this;console.log("Starting connection to MQTT WebSocket..."),this.connectClient(p.MQTT_BROKER_URL,{qos:0},[["oracle-peak-staging/+/+/access-points","access-points",function(t){return e.appendMeasurement(t)}],["oracle-peak-staging/+/+/events","events",function(t){return e.appendEvent(t)}]])},Object.defineProperty(t.prototype,"liveMeasurements",{get:function(){return this.locationMeasurements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"liveEvents",{get:function(){return this.rawEvents},enumerable:!1,configurable:!0}),t=Object(s["a"])([Object(v["b"])({components:{LiveToggle:z,AccessPointsEvents:U,AccessPointsList:N,AccessPointsFeed:P}})],t),t}(c["c"]),H=G,Y=H,ee=(n("0f79"),Object(j["a"])(Y,o,l,!1,null,null,null)),te=ee.exports,ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s["b"])(t,e),t=Object(s["a"])([Object(c["a"])({components:{LiveView:te}})],t),t}(c["c"]),ie=ne,re=ie,ae=(n("5c0b"),Object(j["a"])(re,r,a,!1,null,null,null)),se=ae.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(se)}}).$mount("#app")}});
//# sourceMappingURL=app.b76730d2.js.map